<!--Use JQuery Mobile for styling for now -->
<!-- Bootstrap breaks the camera with its styling -->

 <html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="libs/jquery/dist/jquery.js"></script>
        <script src="cordova.js"></script>
        <script src="CraftARView.js"></script>
    <script
		<script>
				var finding = true;
				var autoar = false;
				var arobject = 0;


				function onLoad()
				{
                    //alert("Device Load");
				   document.addEventListener("deviceready", onDeviceReady, false);
                }

   			 	function onDeviceReady() {
   			 		window.craftarjs.setToken("491e0ef5af504aa0");
            if(finding == true){
              window.craftarjs.startFinding();
            }
   			 		updateStats();

    			}

				function onError(error) {
					alert("Got error response (" + error.code + "): " + error.message);
				}

				function searchCompletedIR(items)
				{
				  if(items.length>0) {
				     arobject = 2;
				     updateStats();
				  	 alert(JSON.stringify(items));
				  }
				  else
				    arobject = 0;
				    updateStats();
				}

				function requestFailedResponse(code, err)
				{
				  //alert("requestFailedResponse Error: "+ code + " " + err);
				}

				function requestImageError(err)
				{
				  alert("requestImageError Error: " + err);
				}

				function ARFound()
				{
				  arobject = 2;
				  finding = false;
          // alert("Image Found");
				  updateStats();
				}

				function updateStats()
				{
					if (finding){
						$("#findingstatus").html("Finding: On");
						$("#findingstatus").css("background-color", "#009900");
					}
					else {
						$("#findingstatus").html("Finding: Off");
						$("#findingstatus").css("background-color", "#990000");
					}
					if (autoar){
						$("#armode").html("Auto AR: On");
						$("#armode").css("background-color", "#009900");
					}
					else {
						$("#armode").html("Auto AR: Off");
						$("#armode").css("background-color", "#990000");
					}
				    switch (arobject)
				    {
				      case 0:
				        $("#picture").html("Image not found");
						$("#picture").css("background-color", "#990000");
						break;
					  case 1:
					    $("#picture").html("Searching...");
						$("#picture").css("background-color", "#990000");
					    break;
					  case 2:
					    $("#picture").html("Image Found");
						$("#picture").css("background-color", "#009900");
						break;
					}
				}


				$(function()  {

				$("#startFinding").on("click", function() {
					window.craftarjs.startFinding();

					finding = true;
					updateStats();
				});

				$("#stopFinding").on("click", function() {
					window.craftarjs.stopFinding();

					finding = false;
					updateStats();
				});

				$("#takepicture").on("click", function() {
				    window.craftarjs.takePictureAndSearch();

				    arobject = 1;
				    updateStats();
				});

				$("#restartCamera").on("click", function() {
				    window.craftarjs.restartCamera();

				});

				$("#triggerFocus").on("click", function() {
				    window.craftarjs.triggerFocus();
				});

				$("#setToken").on("click", function() {
				    window.craftarjs.setToken("491e0ef5af504aa0");

				});


				$("#close").on("click", function() {
				    window.craftarjs.close();

				});

				$("#modearauto").on("click", function() {
					autoar = !autoar;
				    window.craftarjs.setAutomaticAR(autoar);

				    updateStats();
				});

				$("#stopar").on("click", function() {
				    window.craftarjs.stopAR();

				    arobject = false;
				     updateStats();
				});
			});


	</script>
    </head>
    <body onload="onLoad()">
      <img src="close.png" width="58px" height="58px" id="close"/>
      <img src="camera.png" width="100px" height="100px" id="startFinding" style="position:absolute; margin:470px 0px 0px 60px "/>
        <!-- <a href="#menuPopup" data-rel="popup"><button class="ui-btn ui-btn-inline ui-corner-all">+</button></a>

        <div data-role="popup" id="menuPopup" class="ui-content">
          <ul data-role="listview" data-inset="true">
            <li>
              <button id="startFinding" class="ui-btn ui-btn-inline">Start Finding</button>
            </li>
            <li>
              <button id="stopFinding" class="ui-btn ui-btn-inline">Stop Finding</button>
            </li>
            <li>
              <button id="restartCamera" class="ui-btn ui-btn-inline">Restart Camera</button>
            </li>
            <li>
              <button id="triggerFocus" class="ui-btn ui-btn-inline">Trigger focus</button>
            </li>
            <li>
              <button id="close" class="ui-btn ui-btn-inline">Close</button>
            </li>
          </ul>
        </div> -->
    </body>
</html>

<!--Use JQuery Mobile for styling for now -->
<!-- Bootstrap breaks the camera with its styling -->

 <html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="libs/jquery/dist/jquery.js"></script>
        <script src="cordova.js"></script>
        <script src="CraftARView.js"></script>
    <script
		<script>
				var finding = false;
				var autoar = false;
				var arobject = 0;


				function onLoad(){
				   document.addEventListener("deviceready", onDeviceReady, false);
         }

   			 	function onDeviceReady() {
   			 		window.craftarjs.setToken("491e0ef5af504aa0");
            if(finding == true){
              window.craftarjs.startFinding();
              ARFound();
            }
   			 		updateStats();

    			}

				function onError(error) {
					alert("Got error response (" + error.code + "): " + error.message);
				}

				function searchCompletedIR(items){
				  if(items.length>0) {
				     arobject = 2;
				     updateStats();
				  	 alert(JSON.stringify(items));
				  }
				  else
				    arobject = 0;
				    updateStats();
				}

				function requestFailedResponse(code, err){
				  alert("requestFailedResponse Error: "+ code + " " + err);
				}

				function requestImageError(err){
				  alert("requestImageError Error: " + err);
				}

				function ARFound(){
				  arobject = 2;
				  finding = false;
				  updateStats();
				}

				function updateStats(){
          if(finding == true){
            ARFound();
            $("#startFinding").hide();
          }
          else{
            $("#startFinding").show();
          }
				}


				$(function(){
          $("#startFinding").on("click", function() {
					window.craftarjs.startFinding();
          window.craftarjs.setToken("491e0ef5af504aa0");
					finding = true;
					updateStats();
				});

				// $("#takepicture").on("click", function() {
				//     window.craftarjs.takePictureAndSearch();
				//     arobject = 1;
				//     updateStats();
				// });

				// $("#restartCamera").on("click", function() {
				//     window.craftarjs.restartCamera();
				// });

				// $("#triggerFocus").on("click", function() {
				//     window.craftarjs.triggerFocus();
				// });

				$("#setToken").on("click", function() {
				    window.craftarjs.setToken("491e0ef5af504aa0");
				});


				$("#close").on("click", function() {
				    window.craftarjs.close();
				});

				// $("#stopar").on("click", function() {
				//     window.craftarjs.stopAR();
				//     arobject = false;
				//      updateStats();
				// });
			});


	</script>
    </head>
    <body onload="onLoad()">
      <img src="close.png" width="58px" height="58px" id="close"/>
      <img src="camera.png" width="100px" height="100px" id="startFinding" style="position:relative; margin:470px 0px 0px 60px"/>
    </body>
</html>
